/* Generated from Java with JSweet 3.0.0-SNAPSHOT - http://www.jsweet.org */
var cbot;
(function (cbot) {
    class CBotControllerCore {
        constructor(maxMsrblDst, safeDstCl, safeDstMov, cleanRange) {
            if (this.isOn === undefined) {
                this.isOn = null;
            }
            if (this.isCleaning === undefined) {
                this.isCleaning = null;
            }
            if (this.isEvading === undefined) {
                this.isEvading = null;
            }
            if (this.willBeOn === undefined) {
                this.willBeOn = null;
            }
            if (this.willClean === undefined) {
                this.willClean = null;
            }
            if (this.willEvade === undefined) {
                this.willEvade = null;
            }
            if (this.goalAngle === undefined) {
                this.goalAngle = null;
            }
            if (this.goalDst === undefined) {
                this.goalDst = null;
            }
            if (this.pos2goAngle === undefined) {
                this.pos2goAngle = null;
            }
            if (this.pos2goDst === undefined) {
                this.pos2goDst = null;
            }
            if (this.evDst === undefined) {
                this.evDst = null;
            }
            if (this.evAngle === undefined) {
                this.evAngle = null;
            }
            if (this.__proximsensors === undefined) {
                this.__proximsensors = null;
            }
            if (this.maxMsrblDst === undefined) {
                this.maxMsrblDst = null;
            }
            if (this.safeDstCl === undefined) {
                this.safeDstCl = null;
            }
            if (this.safeDstMov === undefined) {
                this.safeDstMov = null;
            }
            if (this.cleanRange === undefined) {
                this.cleanRange = null;
            }
            this.maxMsrblDst = maxMsrblDst;
            this.safeDstCl = safeDstCl;
            this.safeDstMov = safeDstMov;
            this.cleanRange = cleanRange;
            this.__proximsensors = new cbot.ProximSensors(maxMsrblDst);
            this.isOn = false;
            this.isCleaning = false;
            this.isEvading = false;
            this.willBeOn = false;
            this.willClean = false;
            this.willEvade = false;
            this.goalAngle = 0;
            this.goalDst = 0;
            this.pos2goAngle = 0;
            this.pos2goDst = 0;
            this.evDst = 0;
            this.evAngle = 0;
        }
        getInstr4Bot() {
            let botOn;
            let botCleaning;
            let botEvading;
            let angleInMin;
            let dst;
            this.isOn = this.willBeOn;
            this.isCleaning = this.willClean;
            this.isEvading = this.willEvade;
            botOn = this.willBeOn;
            botCleaning = this.willClean;
            botEvading = this.willEvade;
            angleInMin = this.pos2goAngle;
            dst = this.pos2goDst;
            return [botOn, botCleaning, botEvading, angleInMin, dst];
        }
        readGoalPosAndSensors(angleInMin, dst, nne, ene, ese, sse, ssw, wsw, wnw, nnw) {
            if ((((((((((((((((((0 <= angleInMin && angleInMin <= 21599) && 0 <= nne) && nne <= this.maxMsrblDst) && 0 <= ene) && ene <= this.maxMsrblDst) && 0 <= ese) && ese <= this.maxMsrblDst) && 0 <= sse) && sse <= this.maxMsrblDst) && 0 <= ssw) && ssw <= this.maxMsrblDst) && 0 <= wsw) && wsw <= this.maxMsrblDst) && 0 <= wnw) && wnw <= this.maxMsrblDst) && 0 <= nnw) && nnw <= this.maxMsrblDst)) {
                this.goalAngle = angleInMin;
                this.goalDst = dst;
                this.__proximsensors.readSensors(nne, ene, ese, sse, ssw, wsw, wnw, nnw);
            }
            else {
                this.goalAngle = 0;
                this.goalDst = 0;
                this.__proximsensors.readSensors(0, 0, 0, 0, 0, 0, 0, 0);
            }
            this.willBeOn = false;
            this.willClean = false;
            this.willEvade = false;
            this.pos2goDst = 0;
            this.pos2goAngle = 0;
        }
        standBy() {
            this.isOn = false;
            this.isCleaning = false;
            this.isEvading = false;
            this.willBeOn = false;
            this.willClean = false;
            this.willEvade = false;
            this.goalAngle = 0;
            this.goalDst = 0;
            this.pos2goAngle = 0;
            this.pos2goDst = 0;
            this.__proximsensors.readSensors(0, 0, 0, 0, 0, 0, 0, 0);
            this.evDst = 0;
        }
        goToPosAndClean() {
            this.willBeOn = true;
            {
                let allClr;
                allClr = this.__proximsensors.allClear(this.safeDstCl);
                if (this.isCleaning === true) {
                    if (allClr === false) {
                        this.pos2goDst = 0;
                        this.pos2goAngle = 0;
                        this.evDst = 0;
                        this.evAngle = 0;
                    }
                    else {
                        if (this.goalDst === 0) {
                            this.pos2goDst = this.goalDst;
                            this.pos2goAngle = this.goalAngle;
                        }
                        else {
                            if (this.evDst === 0) {
                                {
                                    let frClr;
                                    let leftClr;
                                    let rightClr;
                                    frClr = this.__proximsensors.frontClear(this.goalAngle, this.safeDstMov);
                                    leftClr = this.__proximsensors.frontClear((this.goalAngle + 16200) % 21600, this.safeDstMov);
                                    rightClr = this.__proximsensors.frontClear((this.goalAngle + 5400) % 21600, this.safeDstMov);
                                    if (frClr === true) {
                                        this.pos2goDst = this.goalDst;
                                        this.pos2goAngle = this.goalAngle;
                                        this.evDst = 0;
                                    }
                                    else {
                                        if (leftClr === true) {
                                            this.evDst = CBotControllerCore.EV_START;
                                            this.evAngle = (this.goalAngle + 16200) % 21600;
                                            this.pos2goDst = this.evDst;
                                            this.pos2goAngle = this.evAngle;
                                        }
                                        else if (rightClr === true) {
                                            this.evDst = CBotControllerCore.EV_START;
                                            this.evAngle = (this.goalAngle + 5400) % 21600;
                                            this.pos2goDst = this.evDst;
                                            this.pos2goAngle = this.evAngle;
                                        }
                                        else {
                                            this.pos2goDst = 0;
                                            this.pos2goAngle = 0;
                                            this.evDst = 0;
                                            this.evAngle = 0;
                                        }
                                    }
                                }
                                ;
                            }
                            else {
                                {
                                    let frEvClr;
                                    frEvClr = this.__proximsensors.frontClear(this.evAngle, this.safeDstMov);
                                    if (frEvClr === true) {
                                        this.pos2goDst = this.evDst;
                                        this.pos2goAngle = this.evAngle;
                                        if (this.evDst >= CBotControllerCore.EV_STEP) {
                                            this.evDst = this.evDst - CBotControllerCore.EV_STEP;
                                        }
                                    }
                                    else {
                                        this.pos2goDst = 0;
                                        this.pos2goAngle = 0;
                                        this.evDst = 0;
                                        this.evAngle = 0;
                                    }
                                }
                                ;
                            }
                        }
                    }
                    if ((allClr === false || this.goalDst > this.cleanRange)) {
                        this.willClean = false;
                    }
                    else {
                        this.willClean = true;
                    }
                    this.willEvade = !allClr;
                }
                else {
                    if ((this.goalDst <= this.cleanRange && allClr === true)) {
                        this.willClean = true;
                    }
                    else {
                        this.willClean = false;
                    }
                    if (this.goalDst <= this.cleanRange) {
                        this.willEvade = !allClr;
                    } else {
                        this.willEvade = false;
                    }
                    if (this.goalDst === 0) {
                        this.pos2goDst = this.goalDst;
                        this.pos2goAngle = this.goalAngle;
                    }
                    else {
                        if (this.evDst === 0) {
                            {
                                let frClr;
                                let leftClr;
                                let rightClr;
                                frClr = this.__proximsensors.frontClear(this.goalAngle, this.safeDstMov);
                                leftClr = this.__proximsensors.frontClear((this.goalAngle + 16200) % 21600, this.safeDstMov);
                                rightClr = this.__proximsensors.frontClear((this.goalAngle + 5400) % 21600, this.safeDstMov);
                                if (frClr === true) {
                                    this.pos2goDst = this.goalDst;
                                    this.pos2goAngle = this.goalAngle;
                                    this.evDst = 0;
                                }
                                else {
                                    if (leftClr === true) {
                                        this.evDst = CBotControllerCore.EV_START;
                                        this.evAngle = (this.goalAngle + 16200) % 21600;
                                        this.pos2goDst = this.evDst;
                                        this.pos2goAngle = this.evAngle;
                                    }
                                    else if (rightClr === true) {
                                        this.evDst = CBotControllerCore.EV_START;
                                        this.evAngle = (this.goalAngle + 5400) % 21600;
                                        this.pos2goDst = this.evDst;
                                        this.pos2goAngle = this.evAngle;
                                    }
                                    else {
                                        this.pos2goDst = 0;
                                        this.pos2goAngle = 0;
                                        this.evDst = 0;
                                        this.evAngle = 0;
                                    }
                                    this.willEvade = true;
                                }
                            }
                            ;
                        }
                        else {
                            {
                                let frEvClr;
                                frEvClr = this.__proximsensors.frontClear(this.evAngle, this.safeDstMov);
                                if (frEvClr === true) {
                                    this.pos2goDst = this.evDst;
                                    this.pos2goAngle = this.evAngle;
                                    if (this.evDst >= CBotControllerCore.EV_STEP) {
                                        this.evDst = this.evDst - CBotControllerCore.EV_STEP;
                                    }
                                }
                                else {
                                    this.pos2goDst = 0;
                                    this.pos2goAngle = 0;
                                    this.evDst = 0;
                                    this.evAngle = 0;
                                }
                                this.willEvade = true;
                            }
                            ;
                        }
                    }
                }
            }
            ;
        }
        goToPosAndNoClean() {
            this.willBeOn = true;
            if (this.isCleaning === true) {
                this.willClean = false;
            }
            this.willEvade = false;
            if (this.goalDst === 0) {
                this.pos2goDst = this.goalDst;
                this.pos2goAngle = this.goalAngle;
            }
            else {
                if (this.evDst === 0) {
                    {
                        let frClr;
                        let leftClr;
                        let rightClr;
                        frClr = this.__proximsensors.frontClear(this.goalAngle, this.safeDstMov);
                        leftClr = this.__proximsensors.frontClear((this.goalAngle + 16200) % 21600, this.safeDstMov);
                        rightClr = this.__proximsensors.frontClear((this.goalAngle + 5400) % 21600, this.safeDstMov);
                        if (frClr === true) {
                            this.pos2goDst = this.goalDst;
                            this.pos2goAngle = this.goalAngle;
                            this.evDst = 0;
                        }
                        else {
                            if (leftClr === true) {
                                this.evDst = CBotControllerCore.EV_START;
                                this.evAngle = (this.goalAngle + 16200) % 21600;
                                this.pos2goDst = this.evDst;
                                this.pos2goAngle = this.evAngle;
                            }
                            else if (rightClr === true) {
                                this.evDst = CBotControllerCore.EV_START;
                                this.evAngle = (this.goalAngle + 5400) % 21600;
                                this.pos2goDst = this.evDst;
                                this.pos2goAngle = this.evAngle;
                            }
                            else {
                                this.pos2goDst = 0;
                                this.pos2goAngle = 0;
                                this.evDst = 0;
                                this.evAngle = 0;
                            }
                            this.willEvade = true;
                        }
                    }
                    ;
                }
                else {
                    {
                        let frEvClr;
                        frEvClr = this.__proximsensors.frontClear(this.evAngle, this.safeDstMov);
                        if (frEvClr === true) {
                            this.pos2goDst = this.evDst;
                            this.pos2goAngle = this.evAngle;
                            if (this.evDst >= CBotControllerCore.EV_STEP) {
                                this.evDst = this.evDst - CBotControllerCore.EV_STEP;
                            }
                        }
                        else {
                            this.pos2goDst = 0;
                            this.pos2goAngle = 0;
                            this.evDst = 0;
                            this.evAngle = 0;
                        }
                        this.willEvade = true;
                    }
                    ;
                }
            }
        }
        proximsensors() {
            return this.__proximsensors;
        }
    }
    CBotControllerCore.EV_STEP = 1;
    CBotControllerCore.EV_START = 100;
    cbot.CBotControllerCore = CBotControllerCore;
    CBotControllerCore["__class"] = "cbot.CBotControllerCore";
})(cbot || (cbot = {}));
